@page "/students-overview"

<h3>StudentsOverview</h3>


@if(Students == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <tabel class="table table-light">
        <thead class="table-primary">
        <th>Student Id</th>
        <th>Student Name</th>
        <th>Student Surname</th>
        <th>Year</th>
        <th>Group</th>
        <th>Registration Number</th>
        </thead>
        <tbody>
            @foreach (var student in Students)
            {
                <tr>
                    <td>@student.StudentId</td>
                    <td>@student.Name</td>
                    <td>@student.Surname</td>
                    <td>@student.Year</td>
                    <td>@student.Group</td>
                    <td>@student.RegistrationNumber</td>
                </tr>
            }
        </tbody>
    </tabel>
}

<section id="create-student" class="mt-5">
    <h3>Add new Student</h3>
    @if(NewStudent == null)
    {
        <p><em>Loading...</em></p>
    }
    else
    {
    <EditForm Model="@NewStudent" OnValidSubmit="@CreateStudent">
            <DataAnnotationsValidator />
            <ValidationSummary />
            <label>
                Name <br/>
                <InputText id="name" @bind-Value=NewStudent.Name DisplayName="Name"/>
                <br/>
            </label>
            <label>
                Surname <br />
            <InputText id="surname" @bind-Value=NewStudent.Surname DisplayName="Surname" />
                <br />
            </label>
            <label>
                Phone Number <br />
            <InputText id="phoneNumber" @bind-Value=NewStudent.PhoneNumber DisplayName="PhoneNumber" />
                <br />
            </label>
            <label>
                Year <br />
                <InputNumber id="year" @bind-Value=NewStudent.Year DisplayName="Year" />
                <br />
            </label>
            <label>
                Group <br />
                <InputText id="group" @bind-Value=NewStudent.Group DisplayName="Group" />
                <br />
            </label>
            <label>
                Registration Number <br />
                <InputText id="registrationNumber" @bind-Value=NewStudent.RegistrationNumber DisplayName="RegistrationNumber" />
                <br />
            </label>

            <button type="submit">Add</button>
    </EditForm>
    }
</section>

@if (Students == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <section id="delete-student" class="mt-5">
        <h3>Delete Student by Id</h3>
        <div class="col-sm-10">
            <InputSelect id="delete-student" @bind-Value="GuidForDelete" class="form-control">
                @foreach (var student in Students)
                {
                    <option value="@student.StudentId" class="text-black">@student.StudentId</option>
                }
            </InputSelect>
        </div>
        <button type="submit" onclick="@DeleteStudent">Delete</button>
    </section>
}

<section id="change-group">
    <h3>Change the group by student Id</h3>
    <div class="col-sm-10">
        Select Student Id
        @if (Students == null)
        {
            <p><em>Loading...</em></p>
        }
        else
        {
            <InputSelect id="change-group" @bind-Value="GuidForChangeGroup" class="form-control">
                @foreach (var student in Students)
                {
                    <option value="@student.StudentId" class="text-black">@student.StudentId</option>
                }
            </InputSelect>
        }
        <label>
            Group <br />
            <InputText id="group" @bind-Value=Group DisplayName="Group" />
            <br />
        </label>
        
    </div>
    <button type="submit" onclick="@UpdateStudent">Update</button>
</section>

